<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <title>{{title}}</title>
    <meta content="" name="description" />
    <meta content="" name="keywords" />

    <!-- Favicons -->
    <link href="/static/assets/img/favicon.png" rel="icon" />
    <link
      href="/static/assets/img/apple-touch-icon.png"
      rel="apple-touch-icon"
    />

    <!-- Google Fonts -->
    <link href="https://fonts.gstatic.com" rel="preconnect" />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
      rel="stylesheet"
    />

    <!-- Vendor CSS Files -->
    <link
      href="/static/assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="/static/assets/vendor/bootstrap-icons/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link
      href="/static/assets/vendor/boxicons/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link href="/static/assets/vendor/quill/quill.snow.css" rel="stylesheet" />
    <link href="/static/assets/vendor/quill/quill.bubble.css" rel="stylesheet" />
    <link
      href="/static/assets/vendor/remixicon/remixicon.css"
      rel="stylesheet"
    />
    <link
      href="/static/assets/vendor/simple-datatables/style.css"
      rel="stylesheet"
    />

    <!-- Template Main CSS File -->
    <link href="/static/assets/css/style.css" rel="stylesheet" />

    <!-- =======================================================
  * Template Name: NiceAdmin
  * Updated: Sep 18 2023 with Bootstrap v5.3.2
  * Template URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
  </head>

  <body>
    <!-- ======= Header ======= -->
    <header id="header" class="header fixed-top d-flex align-items-center">
      <div class="d-flex align-items-center justify-content-between">
        <i class="bi bi-list toggle-sidebar-btn m-4"></i>
        <a href="index.html" class="logo d-flex align-items-center">
          <img
            src="/static/assets/img/cfrost-logo.png"
            alt=""
            style="border-radius: 50%"
          />
          <span class="d-none d-lg-block">AdminPanel</span>
        </a>
      </div>
      <!-- End Logo -->

      <div class="search-bar" style="margin-left: auto">
        <form
          class="search-form d-flex align-items-center"
          method="POST"
          action="#"
        >
          <input
            type="text"
            name="query"
            placeholder="Search"
            title="Enter search keyword"
          />
          <button type="submit" title="Search">
            <i class="bi bi-search"></i>
          </button>
        </form>
      </div>
      <!-- End Search Bar -->
    </header>
    <!-- End Header -->

    <!-- ======= Sidebar ======= -->
    <aside id="sidebar" class="sidebar">
      <ul class="sidebar-nav" id="sidebar-nav">
        <li class="nav-item">
          <a class="nav-link" href="/">
            <i class="bi bi-grid"></i>
            <span>Dashboard</span>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="/complaints">
            <i class="bi bi-grid"></i>
            <span>Complaints</span>
          </a>
        </li>
        <!-- End Dashboard Nav -->
      </ul>
    </aside>
    <!-- End Sidebar-->

    <main id="main" class="main">
      <div class="pagetitle">
        <h1>Dashboard</h1>
        <nav>
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="index.html">Society</a></li>
            <li class="breadcrumb-item active">{{society_id}}</li>
          </ol>
        </nav>
      </div>
      <!-- End Page Title -->

      <section class="section dashboard">
        <div class="row">
          <!-- Left side columns -->
          <div class="col-lg-8">
            <div class="row">
              <!-- Sales Card -->
              <!-- End Sales Card -->

              <!-- Revenue Card -->
              <!-- End Revenue Card -->

              <!-- Customers Card -->
              <!-- End Customers Card -->

              <!-- Reports -->
              <div class="col-12">
                <div class="card">
                  <div class="filter">
                    <a class="icon" href="#" data-bs-toggle="dropdown"
                      ><i class="bi bi-three-dots"></i
                    ></a>
                    <ul
                      class="dropdown-menu dropdown-menu-end dropdown-menu-arrow"
                    >
                      <li class="dropdown-header text-start">
                        <h6>Filter</h6>
                      </li>

                      <li>
                        <a class="dropdown-item" href="#" id="phDay">Today</a>
                      </li>
                      <li>
                        <a class="dropdown-item" href="#" id="phWeek"
                          >Last 7 Days</a
                        >
                      </li>
                      <li>
                        <a class="dropdown-item" href="#" id="phMonth"
                          >This Month</a
                        >
                      </li>
                      <li>
                        <a class="dropdown-item" href="#" id="phYear"
                          >This Year</a
                        >
                      </li>
                    </ul>
                  </div>

                  <div class="card-body">
                    <h5 class="card-title">PH <span>/Today</span></h5>

                    <!-- Line Chart -->
                    <div id="phChart"></div>

                    <script>
                      var phChart = null;
                      function updatePHChartDayData(societyId, valueType) {
                        var newData = [74, 12, 10, 27, 53, 89];

                        // Update the chart's data
                        phChart.updateSeries([
                          {
                            data: newData,
                          },
                        ]);
                      }

                      function updatePHChartWeekData(societyId, valueType) {
                        societyId = societyId ? societyId : "{{society_id}}";
                        console.log("updatePHChartWeekData")
                        console.log("societyId", societyId);
                        fetch(
                          `http://localhost:5000/api/society/week/${societyId}/${valueType}`
                        )
                          .then((response) => response.json())
                          .then((data) => {
                            console.log(data);
                            if(data.phvalue.length == 0) {
                              alert("No data found");
                              console.log("No data found");
                              return;
                            }
                            // Update the chart's data
                            phChart.updateSeries([
                              {
                                data: data.phvalue,
                              },
                            ]);

                            phChart
                              .updateOptions({
                                xaxis: {
                                  type: "datetime",
                                  categories: data.timestamps,
                                },
                              })
                              .catch((error) => {
                                console.log('fncmdnaskc');
                                console.error("Error:", error);
                              });
                          });
                      }

                      function updatePHChartMonthData(societyId, year, month, valueType) {
                        societyId = societyId ? societyId : "{{society_id}}";
                        month = month ? month : "9";
                        year = year ? year : "2023";
                        console.log("updatePHMonthData")
                        console.log("societyId", societyId);
                        fetch(
                          `http://localhost:5000/api/month/${societyId}/${year}/${month}/${valueType}`
                        )
                          .then((response) => response.json())
                          .then((data) => {
                            console.log(data);
                            if(data.values.length == 0) {
                              alert("No data found");
                              console.log("No data found");
                              return;
                            }
                            // Update the chart's data
                            phChart.updateSeries([
                              {
                                data: data.values,
                              },
                            ]);

                            phChart
                              .updateOptions({
                                xaxis: {
                                  type: "text",
                                  categories: data.weeks,
                                },
                              })
                              .catch((error) => {
                                console.error("Error:", error);
                              });
                          });
                      }

                      function updatePHChartYearData(societyId, year, valueType) {
                        societyId = societyId ? societyId : "{{society_id}}";
                        year = year ? year : "2023";
                        fetch(
                          `http://localhost:5000/api/year/${societyId}/${year}/${valueType}`
                        )
                          .then((response) => response.json())
                          .then((data) => {
                            console.log(data);
                            if(data.values.length == 0) {
                              alert("No data found");
                              console.log("No data found");
                              return;
                            }
                            // Update the chart's data
                            phChart.updateSeries([
                              {
                                data: data.values,
                              },
                            ]);

                            phChart
                              .updateOptions({
                                xaxis: {
                                  type: "number",
                                  categories: data.months,
                                },
                              })
                              .catch((error) => {
                                console.error("Error:", error);
                              });
                          });
                      }

                      var dayPh = document.getElementById("phDay");
                      dayPh.addEventListener("click", updatePHChartDayData);

                      var weekPh = document.getElementById("phWeek");
                      weekPh.addEventListener("click", () => updatePHChartWeekData("{{society_id}}", "phvalue"));

                      var monthPh = document.getElementById("phMonth");
                      monthPh.addEventListener("click",() => updatePHChartMonthData("{{society_id}}", 2023, "9", "phvalue"));

                      var yearPh = document.getElementById("phYear");
                      yearPh.addEventListener("click", () => updatePHChartYearData("{{society_id}}", 2023, "phvalue"));

                      document.addEventListener("DOMContentLoaded", () => {
                        phChart = new ApexCharts(
                          document.querySelector("#phChart"),
                          {
                            series: [
                              {
                                name: "PH",
                                data: [31, 40, 28, 51, 42, 82, 56],
                              },
                            ],
                            chart: {
                              height: 200,
                              type: "area",
                              toolbar: {
                                show: true,
                              },
                            },
                            markers: {
                              size: 4,
                            },
                            colors: ["#4154f1"],
                            fill: {
                              type: "gradient",
                              gradient: {
                                shadeIntensity: 1,
                                opacityFrom: 0.3,
                                opacityTo: 0.4,
                                stops: [0, 90, 100],
                              },
                            },
                            dataLabels: {
                              enabled: false,
                            },
                            stroke: {
                              curve: "smooth",
                              width: 2,
                            },
                            xaxis: {
                              type: "datetime",
                              categories: [
                                "2018-09-19T00:00:00.000Z",
                                "2018-09-19T01:30:00.000Z",
                                "2018-09-19T02:30:00.000Z",
                                "2018-09-19T03:30:00.000Z",
                                "2018-09-19T04:30:00.000Z",
                                "2018-09-19T05:30:00.000Z",
                                "2018-09-19T06:30:00.000Z",
                              ],
                            },
                            tooltip: {
                              x: {
                                format: "dd/MM/yy HH:mm",
                              },
                            },
                          }
                        );

                        phChart.render();
                        console.log(phChart);
                      });
                    </script>
                    <!-- End Line Chart -->
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="card">
                  <div class="filter">
                    <a class="icon" href="#" data-bs-toggle="dropdown"
                      ><i class="bi bi-three-dots"></i
                    ></a>
                    <ul
                      class="dropdown-menu dropdown-menu-end dropdown-menu-arrow"
                    >
                      <li class="dropdown-header text-start">
                        <h6>Filter</h6>
                      </li>

                      <li>
                        <a class="dropdown-item" href="#" id="turbidityDay"
                          >Today</a
                        >
                      </li>
                      <li>
                        <a class="dropdown-item" href="#" id="turbidityWeek"
                          >Last 7 Days</a
                        >
                      </li>
                      <li>
                        <a class="dropdown-item" href="#" id="turbidityMonth"
                          >This Month</a
                        >
                      </li>
                      <li>
                        <a class="dropdown-item" href="#" id="turbidityYear"
                          >This Year</a
                        >
                      </li>
                    </ul>
                  </div>

                  <div class="card-body">
                    <h5 class="card-title">Turbidity <span>/Today</span></h5>

                    <!-- Line Chart -->
                    <div id="turbidityChart"></div>

                    <script>
                      var turbidityChart = null;

                      function updateTurbidityChartDayData() {
                        var newData = [101, 45, 98, 76];

                        // Update the chart's data
                        turbidityChart.updateSeries([
                          {
                            data: newData,
                          },
                        ]);
                      }

                      function updateTurbidityChartWeekData(
                        societyId,
                        valueType
                      ) {
                        societyId = societyId ? societyId : "{{society_id}}";
                        fetch(
                          `http://localhost:5000/api/society/week/${societyId}/${valueType}`
                        )
                          .then((response) => response.json())
                          .then((data) => {
                            console.log(data);
                            if(data.turbidityvalue.length == 0) {
                              alert("No data found");
                              console.log("No data found");
                              return;
                            }
                            // Update the chart's data
                            turbidityChart.updateSeries([
                              {
                                data: data.turbidityvalue,
                              },
                            ]);

                            turbidityChart
                              .updateOptions({
                                xaxis: {
                                  type: "datetime",
                                  categories: data.timestamps,
                                },
                              })
                              .catch((error) => {
                                console.error("Error:", error);
                              });
                          });
                      }

                      function updateTurbidityChartMonthData(societyId, year, month, valueType) {
                        societyId = societyId ? societyId : "{{society_id}}";
                        month = month ? month : "9";
                        year = year ? year : "2023";
                        fetch(
                          `http://localhost:5000/api/month/${societyId}/${year}/${month}/${valueType}`
                        )
                          .then((response) => response.json())
                          .then((data) => {
                            console.log(data);
                            if(data.values.length == 0) {
                              alert("No data found");
                              console.log("No data found");
                              return;
                            }
                            // Update the chart's data
                            turbidityChart.updateSeries([
                              {
                                data: data.values,
                              },
                            ]);

                            turbidityChart
                              .updateOptions({
                                xaxis: {
                                  type: "text",
                                  categories: data.weeks,
                                },
                              })
                              .catch((error) => {
                                console.error("Error:", error);
                              });
                          });
                      }

                      function updateTurbidityChartYearData(societyId, year, valueType) {
                        societyId = societyId ? societyId : "{{society_id}}";
                        year = year ? year : "2023";
                        fetch(
                          `http://localhost:5000/api/year/${societyId}/${year}/${valueType}`
                        )
                          .then((response) => response.json())
                          .then((data) => {
                            console.log(data);
                            if(data.values.length == 0) {
                              alert("No data found");
                              console.log("No data found");
                              return;
                            }
                            // Update the chart's data
                            turbidityChart.updateSeries([
                              {
                                data: data.values,
                              },
                            ]);

                            turbidityChart
                              .updateOptions({
                                xaxis: {
                                  type: "number",
                                  categories: data.months,
                                },
                              })
                              .catch((error) => {
                                console.error("Error:", error);
                              });
                          });
                      }

                      var dayTurbidity =
                        document.getElementById("turbidityDay");
                      dayTurbidity.addEventListener(
                        "click",
                        updateTurbidityChartDayData
                      );

                      var weekTurbidity =
                        document.getElementById("turbidityWeek");
                        weekTurbidity.addEventListener("click", () =>
                        updateTurbidityChartWeekData("{{society_id}}", "turbidityvalue")
                      );
                      

                      var monthTurbidity =
                        document.getElementById("turbidityMonth");
                      monthTurbidity.addEventListener(
                        "click",
                        () =>  updateTurbidityChartMonthData("{{society_id}}",2023,9,"turbidityvalue")
                      );


                      var yearTurbidity =
                        document.getElementById("turbidityYear");
                      yearTurbidity.addEventListener(
                        "click",
                        () => updateTurbidityChartYearData("{{society_id}}", 2023, "turbidityvalue")
                      );

                      document.addEventListener("DOMContentLoaded", () => {
                        turbidityChart = new ApexCharts(
                          document.querySelector("#turbidityChart"),
                          {
                            series: [
                              {
                                name: "Turbudity",
                                data: [31, 40, 28, 51, 42, 82, 56],
                              },
                            ],
                            chart: {
                              height: 200,
                              type: "area",
                              toolbar: {
                                show: true,
                              },
                            },
                            markers: {
                              size: 4,
                            },
                            colors: ["#2eca6a", "#ff771d"],
                            fill: {
                              type: "gradient",
                              gradient: {
                                shadeIntensity: 1,
                                opacityFrom: 0.3,
                                opacityTo: 0.4,
                                stops: [0, 90, 100],
                              },
                            },
                            dataLabels: {
                              enabled: false,
                            },
                            stroke: {
                              curve: "smooth",
                              width: 2,
                            },
                            xaxis: {
                              type: "datetime",
                              categories: [
                                "2018-09-19T00:00:00.000Z",
                                "2018-09-19T01:30:00.000Z",
                                "2018-09-19T02:30:00.000Z",
                                "2018-09-19T03:30:00.000Z",
                                "2018-09-19T04:30:00.000Z",
                                "2018-09-19T05:30:00.000Z",
                                "2018-09-19T06:30:00.000Z",
                              ],
                            },
                            tooltip: {
                              x: {
                                format: "dd/MM/yy HH:mm",
                              },
                            },
                          }
                        );

                        turbidityChart.render();
                      });
                    </script>
                    <!-- End Line Chart -->
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="card">
                  <div class="filter">
                    <a class="icon" href="#" data-bs-toggle="dropdown"
                      ><i class="bi bi-three-dots"></i
                    ></a>
                    <ul
                      class="dropdown-menu dropdown-menu-end dropdown-menu-arrow"
                    >
                      <li class="dropdown-header text-start">
                        <h6>Filter</h6>
                      </li>

                      <li>
                        <a class="dropdown-item" href="#" id="temperatureDay"
                          >Today</a
                        >
                      </li>
                      <li>
                        <a class="dropdown-item" href="#" id="temperatureWeek"
                          >Last 7 Days</a
                        >
                      </li>
                      <li>
                        <a class="dropdown-item" href="#" id="temperatureMonth"
                          >This Month</a
                        >
                      </li>
                      <li>
                        <a class="dropdown-item" href="#" id="temperatureYear"
                          >This Year</a
                        >
                      </li>
                    </ul>
                  </div>

                  <div class="card-body">
                    <h5 class="card-title">Temperature <span>/Today</span></h5>

                    <!-- Line Chart -->
                    <div id="temperatureChart"></div>

                    <script>
                      var temperatureChart = null;

                      function updateTemperatureChartDayData() {
                        var newData = [74, 32, 101, 87, 23, 59];

                        // Update the chart's data
                        temperatureChart.updateSeries([
                          {
                            data: newData,
                          },
                        ]);
                      }

                      function updateTemperatureChartWeekData(
                        societyId,
                        valueType
                      ) {
                        societyId = societyId ? societyId : "{{society_id}}";
                        fetch(
                          `http://localhost:5000/api/society/week/${societyId}/${valueType}`
                        )
                          .then((response) => response.json())
                          .then((data) => {
                            console.log(data);
                            if(data.temperature.length == 0) {
                              alert("No data found");
                              console.log("No data found");
                              return;
                            }
                            // Update the chart's data
                            temperatureChart.updateSeries([
                              {
                                data: data.temperature,
                              },
                            ]);

                            temperatureChart
                              .updateOptions({
                                xaxis: {
                                  type: "datetime",
                                  categories: data.timestamps,
                                },
                              })
                              .catch((error) => {
                                console.error("Error:", error);
                              });
                          });
                      }

                      function updateTemperatureChartMonthData(societyId, year, month, valueType) {
                        societyId = societyId ? societyId : "{{society_id}}";
                        month = month ? month : "9";
                        year = year ? year : "2023";
                        fetch(
                          `http://localhost:5000/api/month/${societyId}/${year}/${month}/${valueType}`
                        )
                          .then((response) => response.json())
                          .then((data) => {
                            console.log(data);
                            if(data.values.length == 0) {
                              alert("No data found");
                              console.log("No data found");
                              return;
                            }
                            // Update the chart's data
                            temperatureChart.updateSeries([
                              {
                                data: data.values,
                              },
                            ]);

                            temperatureChart
                              .updateOptions({
                                xaxis: {
                                  type: "text",
                                  categories: data.weeks,
                                },
                              })
                              .catch((error) => {
                                console.error("Error:", error);
                              });
                          });
                      }

                      function updateTemperatureChartYearData(societyId, year, valueType) {
                        societyId = societyId ? societyId : "{{society_id}}";
                        year = year ? year : "2023";
                        fetch(
                          `http://localhost:5000/api/year/${societyId}/${year}/${valueType}`
                        )
                          .then((response) => response.json())
                          .then((data) => {
                            console.log(data);
                            if(data.values.length == 0) {
                              alert("No data found");
                              console.log("No data found");
                              return;
                            }
                            // Update the chart's data
                            temperatureChart.updateSeries([
                              {
                                data: data.values,
                              },
                            ]);

                            temperatureChart
                              .updateOptions({
                                xaxis: {
                                  type: "number",
                                  categories: data.months,
                                },
                              })
                              .catch((error) => {
                                console.error("Error:", error);
                              });
                          });

                      }

                      var dayTemperature =
                        document.getElementById("temperatureDay");
                      dayTemperature.addEventListener(
                        "click",
                        updateTemperatureChartDayData
                      );

                      var weekTemperature =
                        document.getElementById("temperatureWeek");
                      weekTemperature.addEventListener("click", () =>
                        updateTemperatureChartWeekData(
                          "{{society_id}}",
                          "temperature"
                        )
                      );

                      var monthTemperature =
                        document.getElementById("temperatureMonth");
                      monthTemperature.addEventListener(
                        "click",
                        () => updateTemperatureChartMonthData("{{society_id}}", 2023, "9", "temperature")
                      );

                      var yearTemperature =
                        document.getElementById("temperatureYear");
                      yearTemperature.addEventListener(
                        "click",
                        () => updateTemperatureChartYearData("{{society_id}}", 2023, "temperature")
                      );

                      document.addEventListener("DOMContentLoaded", () => {
                        temperatureChart = new ApexCharts(
                          document.querySelector("#temperatureChart"),
                          {
                            series: [
                              {
                                name: "Temperature",
                                data: [31, 40, 28, 51, 42, 82, 56],
                              },
                            ],
                            chart: {
                              height: 200,
                              type: "area",
                              toolbar: {
                                show: true,
                              },
                            },
                            markers: {
                              size: 4,
                            },
                            colors: ["#2eca6a", "#ff771d"],
                            fill: {
                              type: "gradient",
                              gradient: {
                                shadeIntensity: 1,
                                opacityFrom: 0.3,
                                opacityTo: 0.4,
                                stops: [0, 90, 100],
                              },
                            },
                            dataLabels: {
                              enabled: false,
                            },
                            stroke: {
                              curve: "smooth",
                              width: 2,
                            },
                            xaxis: {
                              type: "datetime",
                              categories: [
                                "2018-09-19T00:00:00.000Z",
                                "2018-09-19T01:30:00.000Z",
                                "2018-09-19T02:30:00.000Z",
                                "2018-09-19T03:30:00.000Z",
                                "2018-09-19T04:30:00.000Z",
                                "2018-09-19T05:30:00.000Z",
                                "2018-09-19T06:30:00.000Z",
                              ],
                            },
                            tooltip: {
                              x: {
                                format: "dd/MM/yy HH:mm",
                              },
                            },
                          }
                        );

                        temperatureChart.render();
                      });
                    </script>

                    <!-- End Line Chart -->
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="card">
                  <div class="filter">
                    <a class="icon" href="#" data-bs-toggle="dropdown"
                      ><i class="bi bi-three-dots"></i
                    ></a>
                    <ul
                      class="dropdown-menu dropdown-menu-end dropdown-menu-arrow"
                    >
                      <li class="dropdown-header text-start">
                        <h6>Filter</h6>
                      </li>

                      <li>
                        <a class="dropdown-item" href="#" id="ecDay">Today</a>
                      </li>
                      <li>
                        <a class="dropdown-item" href="#" id="ecWeek"
                          >Last 7 Days</a
                        >
                      </li>
                      <li>
                        <a class="dropdown-item" href="#" id="ecMonth"
                          >This Month</a
                        >
                      </li>
                      <li>
                        <a class="dropdown-item" href="#" id="ecYear"
                          >This Year</a
                        >
                      </li>
                    </ul>
                  </div>

                  <div class="card-body">
                    <h5 class="card-title">
                      Electrical Conductivity <span>/Today</span>
                    </h5>

                    <!-- Line Chart -->
                    <div id="ecChart"></div>

                    <script>
                      var ecChart = null;

                      function updateEcChartDayData() {
                        var newData = [56, 78, 62, 45];

                        // Update the chart's data
                        ecChart.updateSeries([
                          {
                            data: newData,
                          },
                        ]);
                      }

                      function updateEcChartWeekData(societyId, valueType) {
                        societyId = societyId ? societyId : "{{society_id}}";
                        fetch(
                          `http://localhost:5000/api/society/week/${societyId}/${valueType}`
                        )
                          .then((response) => response.json())
                          .then((data) => {
                            console.log(data);
                            if(data.ecvalue.length == 0) {
                              alert("No data found");
                              console.log("No data found");
                              return;
                            }
                            // Update the chart's data
                            ecChart.updateSeries([
                              {
                                data: data.ecvalue,
                              },
                            ]);

                            ecChart
                              .updateOptions({
                                xaxis: {
                                  type: "datetime",
                                  categories: data.timestamps,
                                },
                              })
                              .catch((error) => {
                                console.error("Error:", error);
                              });
                          });
                      }

                      function updateEcChartMonthData(societyId, year, month, valueType) {
                        societyId = societyId ? societyId : "{{society_id}}";
                        month = month ? month : "9";
                        year = year ? year : "2023";
                        fetch(
                          `http://localhost:5000/api/month/${societyId}/${year}/${month}/${valueType}`
                        )
                          .then((response) => response.json())
                          .then((data) => {
                            console.log(data);
                            if(data.values.length == 0) {
                              alert("No data found");
                              console.log("No data found");
                              return;
                            }
                            // Update the chart's data
                            ecChart.updateSeries([
                              {
                                data: data.values,
                              },
                            ]);

                            ecChart
                              .updateOptions({
                                xaxis: {
                                  type: "text",
                                  categories: data.weeks,
                                },
                              })
                              .catch((error) => {
                                console.error("Error:", error);
                              });
                          });
                      }

                      function updateEcChartYearData(societyId, year, valueType) {
                        societyId = societyId ? societyId : "{{society_id}}";
                        year = year ? year : "2023";
                        fetch(
                          `http://localhost:5000/api/year/${societyId}/${year}/${valueType}`
                        )
                          .then((response) => response.json())
                          .then((data) => {
                            console.log(data);
                            if(data.values.length == 0) {
                              alert("No data found");
                              console.log("No data found");
                              return;
                            }
                            // Update the chart's data
                            ecChart.updateSeries([
                              {
                                data: data.values,
                              },
                            ]);

                            ecChart
                              .updateOptions({
                                xaxis: {
                                  type: "number",
                                  categories: data.months,
                                },
                              })
                              .catch((error) => {
                                console.error("Error:", error);
                              });
                          });
                      }

                      var dayEc = document.getElementById("ecDay");
                      dayEc.addEventListener("click", updateEcChartDayData);

                      var weekEc = document.getElementById("ecWeek");
                      weekEc.addEventListener("click", () =>
                        updateEcChartWeekData("{{society_id}}", "ecvalue")
                      );

                      var monthEc = document.getElementById("ecMonth");
                      monthEc.addEventListener("click", () => updateEcChartMonthData("{{society_id}}", 2023, "9", "ecvalue"));

                      var yearEc = document.getElementById("ecYear");
                      yearEc.addEventListener("click", () => updateEcChartYearData("{{society_id}}", 2023, "ecvalue"));

                      document.addEventListener("DOMContentLoaded", () => {
                        ecChart = new ApexCharts(
                          document.querySelector("#ecChart"),
                          {
                            series: [
                              {
                                name: "Electrical Conductivity",
                                data: [58, 63, 55, 62, 57, 61, 59],
                              },
                            ],
                            chart: {
                              height: 200,
                              type: "area",
                              toolbar: {
                                show: true,
                              },
                            },
                            markers: {
                              size: 4,
                            },
                            colors: ["#2eca6a", "#ff771d"],
                            fill: {
                              type: "gradient",
                              gradient: {
                                shadeIntensity: 1,
                                opacityFrom: 0.3,
                                opacityTo: 0.4,
                                stops: [0, 90, 100],
                              },
                            },
                            dataLabels: {
                              enabled: false,
                            },
                            stroke: {
                              curve: "smooth",
                              width: 2,
                            },
                            xaxis: {
                              type: "datetime",
                              categories: [
                                "2018-09-19T00:00:00.000Z",
                                "2018-09-19T01:30:00.000Z",
                                "2018-09-19T02:30:00.000Z",
                                "2018-09-19T03:30:00.000Z",
                                "2018-09-19T04:30:00.000Z",
                                "2018-09-19T05:30:00.000Z",
                                "2018-09-19T06:30:00.000Z",
                              ],
                            },
                            tooltip: {
                              x: {
                                format: "dd/MM/yy HH:mm",
                              },
                            },
                          }
                        );

                        ecChart.render();
                      });
                    </script>

                    <!-- End Line Chart -->
                  </div>
                </div>
              </div>

              <div class="col-12">
                <div class="card">
                  <div class="filter">
                    <a class="icon" href="#" data-bs-toggle="dropdown"
                      ><i class="bi bi-three-dots"></i
                    ></a>
                    <ul
                      class="dropdown-menu dropdown-menu-end dropdown-menu-arrow"
                    >
                      <li class="dropdown-header text-start">
                        <h6>Filter</h6>
                      </li>

                      <li>
                        <a class="dropdown-item" href="#" id="flowDay">Today</a>
                      </li>
                      <li>
                        <a class="dropdown-item" href="#" id="flowWeek"
                          >Last 7 Days</a
                        >
                      </li>
                      <li>
                        <a class="dropdown-item" href="#" id="flowMonth"
                          >This Month</a
                        >
                      </li>
                      <li>
                        <a class="dropdown-item" href="#" id="flowYear"
                          >This Year</a
                        >
                      </li>
                    </ul>
                  </div>

                  <div class="card-body">
                    <h5 class="card-title">
                      Flow Rate <span>/Today</span>
                    </h5>

                    <!-- Line Chart -->
                    <div id="flowChart"></div>

                    <script>
                      var flowChart = null;

                      function updateFlowChartDayData() {
                        var newData = [56, 78, 62, 45];

                        // Update the chart's data
                        flowChart.updateSeries([
                          {
                            data: newData,
                          },
                        ]);
                      }

                      function updateFlowChartWeekData(societyId, valueType) {
                        societyId = societyId ? societyId : "{{society_id}}";
                        fetch(
                          `http://localhost:5000/api/society/week/${societyId}/${valueType}`
                        )
                          .then((response) => response.json())
                          .then((data) => {
                            console.log(data);
                            if(data.flowrate.length == 0) {
                              alert("No data found");
                              console.log("No data found");
                              return;
                            }
                            // Update the chart's data
                            flowChart.updateSeries([
                              {
                                data: data.flowrate,
                              },
                            ]);

                            flowChart
                              .updateOptions({
                                xaxis: {
                                  type: "datetime",
                                  categories: data.timestamps,
                                },
                              })
                              .catch((error) => {
                                console.error("Error:", error);
                              });
                          });
                      }

                      function updateFlowChartMonthData(societyId, year, month, valueType) {
                        societyId = societyId ? societyId : "{{society_id}}";
                        month = month ? month : "9";
                        year = year ? year : "2023";
                        fetch(
                          `http://localhost:5000/api/month/${societyId}/${year}/${month}/${valueType}`
                        )
                          .then((response) => response.json())
                          .then((data) => {
                            console.log(data);
                            if(data.values.length == 0) {
                              alert("No data found");
                              console.log("No data found");
                              return;
                            }
                            // Update the chart's data
                            flowChart.updateSeries([
                              {
                                data: data.values,
                              },
                            ]);

                            flowChart
                              .updateOptions({
                                xaxis: {
                                  type: "text",
                                  categories: data.weeks,
                                },
                              })
                              .catch((error) => {
                                console.error("Error:", error);
                              });
                          });
                      }

                      function updateFlowChartYearData(societyId, year, valueType) {
                        societyId = societyId ? societyId : "{{society_id}}";
                        year = year ? year : "2023";
                        fetch(
                          `http://localhost:5000/api/year/${societyId}/${year}/${valueType}`
                        )
                          .then((response) => response.json())
                          .then((data) => {
                            console.log(data);
                            if(data.values.length == 0) {
                              alert("No data found");
                              console.log("No data found");
                              return;
                            }
                            // Update the chart's data
                            flowChart.updateSeries([
                              {
                                data: data.values,
                              },
                            ]);

                            flowChart
                              .updateOptions({
                                xaxis: {
                                  type: "number",
                                  categories: data.months,
                                },
                              })
                              .catch((error) => {
                                console.error("Error:", error);
                              });
                          });
                      }

                      var dayFlow = document.getElementById("flowDay");
                      dayFlow.addEventListener("click", updateFlowChartDayData);

                      var weekFlow = document.getElementById("flowWeek");
                      weekFlow.addEventListener("click", () =>
                        updateFlowChartWeekData("{{society_id}}", "flowrate")
                      );

                      var monthFlow = document.getElementById("flowMonth");
                      monthFlow.addEventListener("click", () => updateFlowChartMonthData("{{society_id}}", 2023, "9", "flowrate"));

                      var yearFlow = document.getElementById("flowYear");
                      yearFlow.addEventListener("click", () => updateFlowChartYearData("{{society_id}}", 2023, "flowrate"));

                      document.addEventListener("DOMContentLoaded", () => {
                        flowChart = new ApexCharts(
                          document.querySelector("#flowChart"),
                          {
                            series: [
                              {
                                name: "Flow Rate",
                                data: [58, 63, 55, 62, 57, 61, 59],
                              },
                            ],
                            chart: {
                              height: 200,
                              type: "area",
                              toolbar: {
                                show: true,
                              },
                            },
                            markers: {
                              size: 4,
                            },
                            colors: ["#2eca6a", "#ff771d"],
                            fill: {
                              type: "gradient",
                              gradient: {
                                shadeIntensity: 1,
                                opacityFrom: 0.3,
                                opacityTo: 0.4,
                                stops: [0, 90, 100],
                              },
                            },
                            dataLabels: {
                              enabled: false,
                            },
                            stroke: {
                              curve: "smooth",
                              width: 2,
                            },
                            xaxis: {
                              type: "datetime",
                              categories: [
                                "2018-09-19T00:00:00.000Z",
                                "2018-09-19T01:30:00.000Z",
                                "2018-09-19T02:30:00.000Z",
                                "2018-09-19T03:30:00.000Z",
                                "2018-09-19T04:30:00.000Z",
                                "2018-09-19T05:30:00.000Z",
                                "2018-09-19T06:30:00.000Z",
                              ],
                            },
                            tooltip: {
                              x: {
                                format: "dd/MM/yy HH:mm",
                              },
                            },
                          }
                        );

                        flowChart.render();
                      });
                    </script>

                    <!-- End Line Chart -->
                  </div>
                </div>
              </div>

              <div class="col-12">
                <div class="card">
                  <div class="filter">
                    <a class="icon" href="#" data-bs-toggle="dropdown">
                      <i class="bi bi-three-dots"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                      <li class="dropdown-header text-start">
                        <h6>Filter</h6>
                      </li>
              
                      <li>
                        <a class="dropdown-item" href="#" id="tdsDay">Today</a>
                      </li>
                      <li>
                        <a class="dropdown-item" href="#" id="tdsWeek">Last 7 Days</a>
                      </li>
                      <li>
                        <a class="dropdown-item" href="#" id="tdsMonth">This Month</a>
                      </li>
                      <li>
                        <a class="dropdown-item" href="#" id="tdsYear">This Year</a>
                      </li>
                    </ul>
                  </div>
              
                  <div class="card-body">
                    <h5 class="card-title">
                      TDS Value <span>/ Today</span>
                    </h5>
              
                    <!-- Line Chart -->
                    <div id="tdsChart"></div>
              
                    <script>
                      var tdsChart = null;
              
                      function updateTDSChartDayData() {
                        var newData = [56, 78, 62, 45]; // Sample data, replace with actual data
              
                        // Update the chart's data
                        tdsChart.updateSeries([
                          {
                            data: newData,
                          },
                        ]);
                      }
              
                      function updateTDSChartWeekData(societyId, valueType) {
                        societyId = societyId ? societyId : "{{society_id}}";
                        fetch(
                          `http://localhost:5000/api/society/week/${societyId}/${valueType}`
                        )
                          .then((response) => response.json())
                          .then((data) => {
                            if(data.tdsvalue.length == 0) {
                              alert("No data found");
                              console.log("No data found");
                              return;
                            }
                            console.log(data);
                            // Update the chart's data
                            tdsChart.updateSeries([
                              {
                                data: data.tdsvalue, // Use the correct key for TDS data
                              },
                            ]);
              
                            tdsChart
                              .updateOptions({
                                xaxis: {
                                  type: "datetime",
                                  categories: data.timestamps,
                                },
                              })
                              .catch((error) => {
                                console.error("Error:", error);
                              });
                          });
                      }
              
                      function updateTDSChartMonthData(societyId, year, month, valueType) {
                        societyId = societyId ? societyId : "{{society_id}}";
                        month = month ? month : "9";
                        year = year ? year : "2023";
                        fetch(
                          `http://localhost:5000/api/month/${societyId}/${year}/${month}/${valueType}`
                        )
                          .then((response) => response.json())
                          .then((data) => {
                            console.log(data);
                            if(data.values.length == 0) {
                              alert("No data found");
                              console.log("No data found");
                              return;
                            }
                            // Update the chart's data
                            tdsChart.updateSeries([
                              {
                                data: data.values, // Use the correct key for TDS data
                              },
                            ]);
              
                            tdsChart
                              .updateOptions({
                                xaxis: {
                                  type: "text",
                                  categories: data.weeks,
                                },
                              })
                              .catch((error) => {
                                console.error("Error:", error);
                              });
                          });
                      }
              
                      function updateTDSChartYearData(societyId, year, valueType) {
                        societyId = societyId ? societyId : "{{society_id}}";
                        year = year ? year : "2023";
                        fetch(
                          `http://localhost:5000/api/year/${societyId}/${year}/${valueType}`
                        )
                          .then((response) => response.json())
                          .then((data) => {
                            console.log(data);
                            if(data.values.length == 0) {
                              alert("No data found");
                              console.log("No data found");
                              return;
                            }
                            // Update the chart's data
                            tdsChart.updateSeries([
                              {
                                data: data.values, // Use the correct key for TDS data
                              },
                            ]);
              
                            tdsChart
                              .updateOptions({
                                xaxis: {
                                  type: "number",
                                  categories: data.months,
                                },
                              })
                              .catch((error) => {
                                console.error("Error:", error);
                              });
                          });
                      }
              
                      var tdsDay = document.getElementById("tdsDay");
                      tdsDay.addEventListener("click", updateTDSChartDayData);
              
                      var tdsWeek = document.getElementById("tdsWeek");
                      tdsWeek.addEventListener("click", () =>
                        updateTDSChartWeekData("{{society_id}}", "tdsvalue")
                      );
              
                      var tdsMonth = document.getElementById("tdsMonth");
                      tdsMonth.addEventListener("click", () =>
                        updateTDSChartMonthData("{{society_id}}", 2023, "9", "tdsvalue")
                      );
              
                      var tdsYear = document.getElementById("tdsYear");
                      tdsYear.addEventListener("click", () =>
                        updateTDSChartYearData("{{society_id}}", 2023, "tdsvalue")
                      );
              
                      document.addEventListener("DOMContentLoaded", () => {
                        tdsChart = new ApexCharts(
                          document.querySelector("#tdsChart"),
                          {
                            series: [
                              {
                                name: "TDS Value",
                                data: [58, 63, 55, 62, 57, 61, 59], // Sample data, replace with actual data
                              },
                            ],
                            chart: {
                              height: 200,
                              type: "area",
                              toolbar: {
                                show: true,
                              },
                            },
                            markers: {
                              size: 4,
                            },
                            colors: ["#2eca6a", "#ff771d"],
                            fill: {
                              type: "gradient",
                              gradient: {
                                shadeIntensity: 1,
                                opacityFrom: 0.3,
                                opacityTo: 0.4,
                                stops: [0, 90, 100],
                              },
                            },
                            dataLabels: {
                              enabled: false,
                            },
                            stroke: {
                              curve: "smooth",
                              width: 2,
                            },
                            xaxis: {
                              type: "datetime",
                              categories: [
                                "2018-09-19T00:00:00.000Z",
                                "2018-09-19T01:30:00.000Z",
                                "2018-09-19T02:30:00.000Z",
                                "2018-09-19T03:30:00.000Z",
                                "2018-09-19T04:30:00.000Z",
                                "2018-09-19T05:30:00.000Z",
                                "2018-09-19T06:30:00.000Z",
                              ],
                            },
                            tooltip: {
                              x: {
                                format: "dd/MM/yy HH:mm",
                              },
                            },
                          }
                        );
              
                        tdsChart.render();
                      });
                    </script>
              
                    <!-- End Line Chart -->
                  </div>
                </div>
              </div>              
              
              <!-- End Reports -->

              <!-- Recent Sales -->
              <!-- End Recent Sales -->

              <!-- Top Selling -->
              <!-- End Top Selling -->
            </div>
          </div>
          <!-- End Left side columns -->

          <!-- Right side columns -->
          <div class="col-lg-4">
            <!-- Recent Activity -->
            <div class="card">
             

              <div class="card-body">
                <h5 class="card-title">Recent Complaints</h5>

                <div class="activity">
                  {% for complaint in complaints %}
                  <div class="activity-item d-flex">
                    <div class="activite-label">{{complaint.diff}}</div>
                    <i
                      class="bi bi-circle-fill activity-badge text-success align-self-start"
                    ></i>
                    <div class="activity-content">
                      {{complaint.complaint}}
                    </div>
                  </div>
                  {% endfor %}
                  <!-- End activity item-->
                </div>
              </div>
            </div>
            <!-- End Recent Activity -->

            <!-- Budget Report -->
            <div class="card">

              <div class="card-body pb-0">
                <h5 class="card-title">Quality Report </h5>

                <div
                  id="budgetChart"
                  style="min-height: 400px"
                  class="echart"
                ></div>

                <script>
                  document.addEventListener("DOMContentLoaded", () => {
                    var budgetChart = echarts
                      .init(document.querySelector("#budgetChart"))
                      .setOption({
                        legend: {
                          data: ["Max Value", "Actual Value","Min Value"],
                        },
                        radar: {
                          // shape: 'circle',
                          indicator: [
                            {
                              name: "PH",
                              max: 6500,
                            },
                            {
                              name: "Turbudity",
                              max: 6500,
                            },
                            {
                              name: "Temperature",
                              max: 6500,
                            },
                            {
                              name: "Electrical Conductivity",
                              max: 6500,
                            },
                            {
                              name: "Flow Rate",
                              max: 6500,
                            },
                            {
                              name: "TDS",
                              max: 6500,
                            },
                          ],
                        },
                        series: [
                          {
                            name: "Budget vs spending",
                            type: "radar",
                            data: [
                              {
                                value: [6000, 6000, 6000, 6000, 6000, 6000],
                                name: "Max Value",
                              },
                              {
                                value: [
                                  4000, 4000, 4000, 4000, 4000, 4000,
                                ],
                                name: "Actual Value",
                              },
                              {
                                value: [
                                  3000, 3000, 3000, 3000, 3000, 3000,
                                ],
                                name: "Min Value",
                              }
                            ],
                          },
                        ],
                      });
                  });
                </script>
              </div>
            </div>
            <!-- End Budget Report -->

            <!-- Website Traffic -->
            <div class="card">

              <div class="card-body pb-0">
                <h5 class="card-title">Quality <span>| Current</span></h5>

                <div
                  id="trafficChart"
                  style="min-height: 400px"
                  class="echart"
                ></div>

                <script>
                  document.addEventListener("DOMContentLoaded", () => {
                    echarts
                      .init(document.querySelector("#trafficChart"))
                      .setOption({
                        tooltip: {
                          trigger: "item",
                        },
                        legend: {
                          top: "5%",
                          left: "center",
                        },
                        series: [
                          {
                            name: "Access From",
                            type: "pie",
                            radius: ["40%", "70%"],
                            avoidLabelOverlap: false,
                            label: {
                              show: false,
                              position: "center",
                            },
                            emphasis: {
                              label: {
                                show: true,
                                fontSize: "18",
                                fontWeight: "bold",
                              },
                            },
                            labelLine: {
                              show: false,
                            },
                            data: [
                              {
                                value: 1048,
                                name: "Good",
                              },
                              {
                                value: 0,
                                name: "Excellent",
                              },
                              {
                                value: 0,
                                name: "Average",
                              },
                              {
                                value: 0,
                                name: "Poor",
                              },
                              {
                                value: 0,
                                name: "Very Poor",
                              },
                            ],
                          },
                        ],
                      });
                  });
                </script>
              </div>
            </div>
            <!-- End Website Traffic -->

            <!-- News & Updates Traffic -->
            <!-- End News & Updates -->
          </div>
          <!-- End Right side columns -->
        </div>
      </section>
    </main>
    <!-- End #main -->

    <!-- Vendor JS Files -->
    <script src="/static/assets/vendor/apexcharts/apexcharts.min.js"></script>
    <script src="/static/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/static/assets/vendor/chart.js/chart.umd.js"></script>
    <script src="/static/assets/vendor/echarts/echarts.min.js"></script>
    <script src="/static/assets/vendor/quill/quill.min.js"></script>
    <script src="/static/assets/vendor/simple-datatables/simple-datatables.js"></script>
    <script src="/static/assets/vendor/tinymce/tinymce.min.js"></script>
    <script src="/static/assets/vendor/php-email-form/validate.js"></script>

    <!-- Template Main JS File -->
    <script src="/static/assets/js/main.js"></script>
  </body>
</html>
